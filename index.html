<script>
// URL parameters
const params = new URLSearchParams(window.location.search);
const name = params.get("name");
const guests = params.get("guests");

// Fill personalized sections
if(name && guests){
  document.getElementById("message").innerHTML = "Dear <b>" + name + "</b>,";
  document.getElementById("guest-name").innerText = name;
  document.getElementById("num-guests").innerText = guests;
}

// Track RSVP selection silently
let attending = null;
function selectAttendance(choice){
  attending = choice;
  // No alerts needed; selection will be submitted later
  // Optional: highlight selected button
  const buttons = document.querySelectorAll('.rsvp-buttons button');
  buttons.forEach(btn => btn.style.opacity = '0.6'); // dim all
  if(choice){
    document.querySelector('button.confirm').style.opacity = '1'; // highlight Yes
  } else {
    document.querySelector('button.decline').style.opacity = '1'; // highlight No
  }
}

// Submit form
function submitForm(){
  const loveMsg = document.getElementById("love-message").value;
  if(attending === null){
    alert("Please select Yes or No for attendance");
    return;
  }
  alert(
    "Submitted!\n" +
    "Attending: " + (attending ? "Yes" : "No") + "\n" +
    "Message: " + loveMsg
  );
  // Future: connect to Google Sheets / WhatsApp / Email
}
</script>
